<!DOCTYPE html>

<html>
    <head>
        <meta charset="utf-8" />
        <link href="css/style.css" rel="stylesheet">
        <link href="css/animate.css" rel="stylesheet">

        <script type="text/javascript" src="json/akuma.js"></script>
        <script type="text/javascript" src="json/alisa.js"></script>
        <script type="text/javascript" src="json/anna.js"></script>
        <script type="text/javascript" src="json/armor_king.js"></script>
        <script type="text/javascript" src="json/asuka.js"></script>
        <script type="text/javascript" src="json/bob.js"></script>
        <script type="text/javascript" src="json/bryan.js"></script>
        <script type="text/javascript" src="json/claudio.js"></script>
        <script type="text/javascript" src="json/devil_jin.js"></script>
        <script type="text/javascript" src="json/dragunov.js"></script>
        <script type="text/javascript" src="json/eddy.js"></script>
        <script type="text/javascript" src="json/eliza.js"></script>
        <script type="text/javascript" src="json/feng.js"></script>
        <script type="text/javascript" src="json/geese.js"></script>
        <script type="text/javascript" src="json/gigas.js"></script>
        <script type="text/javascript" src="json/heihachi.js"></script>
        <script type="text/javascript" src="json/hwoarang.js"></script>
        <script type="text/javascript" src="json/jack7.js"></script>
        <script type="text/javascript" src="json/jin.js"></script>
        <script type="text/javascript" src="json/josie.js"></script>
        <script type="text/javascript" src="json/julia.js"></script>
        <script type="text/javascript" src="json/katarina.js"></script>
        <script type="text/javascript" src="json/kazumi.js"></script>
        <script type="text/javascript" src="json/kazuya.js"></script>
        <script type="text/javascript" src="json/king.js"></script>
        <script type="text/javascript" src="json/kuma.js"></script>
        <script type="text/javascript" src="json/lars.js"></script>
        <script type="text/javascript" src="json/law.js"></script>
        <script type="text/javascript" src="json/lee.js"></script>
        <script type="text/javascript" src="json/lei.js"></script>
        <script type="text/javascript" src="json/leo.js"></script>
        <script type="text/javascript" src="json/lili.js"></script>
        <script type="text/javascript" src="json/lucky_chloe.js"></script>
        <script type="text/javascript" src="json/marduk.js"></script>
        <script type="text/javascript" src="json/master_raven.js"></script>
        <script type="text/javascript" src="json/miguel.js"></script>
        <script type="text/javascript" src="json/negan.js"></script>
        <script type="text/javascript" src="json/nina.js"></script>
        <script type="text/javascript" src="json/noctis.js"></script>
        <script type="text/javascript" src="json/panda.js"></script>
        <script type="text/javascript" src="json/paul.js"></script>
        <script type="text/javascript" src="json/shaheen.js"></script>
        <script type="text/javascript" src="json/steve.js"></script>
        <script type="text/javascript" src="json/xiaoyu.js"></script>
        <script type="text/javascript" src="json/yoshimitsu.js"></script>
        <script type="text/javascript" src="json/zafina.js"></script>

        <script type="text/javascript" src="json/spotlight.js"></script>
        <script type="text/javascript" src="json/keymove.js"></script>
        <script type="text/javascript" src="js/frames.js"></script>        

        <script type="text/javascript" src="js/script.js"></script>

        <link href="bootstrap/css/bootstrap.css" rel="stylesheet">
        <script src="bootstrap/js/jquery.js"></script>
        <script src="bootstrap/js/bootstrap.min.js"></script>

        <script src="cordova.js"></script>
        <script src="cordova_plugins.js"></script>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
        <title>t7framecoaching</title>
    </head>

    <body class="menubody" onload="init();">
        <nav class="navbar navbar-inverse">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-xs-3"><button class="btn btnmenutop"><p><span class="glyphicon glyphicon-chevron-left" onclick="goToMenu('left')"></span></p></button></div>
                    <div class="col-xs-6" style="text-align: center"><p id="onglet_name">FrameData</p></div>
                    <div class="col-xs-3" style="float:right"><button class="btn btnmenutop"><p><span class="glyphicon glyphicon-chevron-right" onclick="goToMenu('right')"></span></p></button></div>
                </div>
            </div>
        </nav>
        <div class="app container" id="FrameData">
            <div class="col-sm-12" style="padding:0px;">
                <script>
                    function getCharacterFromJson(myvar,character){
                        for(var x=0;x<myvar.length;x++){
                            if(myvar[x].Character==character){
                                return myvar[x].Content;
                            }
                        }
                    }
                    var char = $_GET('character');
                    var character_id = parseInt($_GET('character'));
                    var character = characters[character_id];
                    var frame = frames[character_id];
                    var keys = Object.keys(frame[0]);
                    var properties = "Command";
                    var spotlight = getCharacterFromJson(spotlight,character);
                    var keymove = getCharacterFromJson(keymove,character);
                </script>
                <div class="form-group" style="margin-top: 1%;margin-bottom: 1%;">
                    <select class="form-control" id="properties_select" onchange="selectProperties(this.value)">
                        <script>
                            for(var x=0;x<keys.length;x++){
                                document.write("<option>"+keys[x]+"</option>");
                            }
                        </script>
                    </select>
                </div>
                <div class="input-group">
                    <input type="text" class="form-control" placeholder="Command" aria-describedby="sizing-addon2" id="search_bar" onchange="search()">
                    <span class="glyphicon glyphicon-remove input-group-addon" id="sizing-addon1" onclick="deleteSearch()"></span>
                </div>
                <div id="framedata_controller">
                    <table>
                        <tbody>
                            <tr>
                                <td colspan="2"><img onclick="btn('u')" class="btn fd_btngame" id="btnu"  src="img/btn/u.png"/></td>
                                <td colspan="2"><img onclick="btn('2')" class="btn fd_btngame" id="btn2" style="display: inline" src="img/btn/2.png"/></td>
                            </tr>
                            <tr>
                                
                                
                                <td><img onclick="btn('b')" class="btn fd_btngame" id="btnb" style="display: inline" src="img/btn/b.png"/></td>
                                <td><img onclick="btn('f')" class="btn fd_btngame" id="btnf" style="display: inline" src="img/btn/f.png"/></td>
                                <td ><img onclick="btn('1')" class="btn fd_btngame" id="btn1"  src="img/btn/1.png"/></td>
                                <td><img onclick="btn('4')" class="btn fd_btngame" id="btn4" src="img/btn/4.png"/></td>
                            </tr>
                            <tr>
                                <td colspan="2"><img onclick="btn('d')" class="btn fd_btngame" id="btnd" src="img/btn/d.png"/></td>
                                <td colspan="2"><img onclick="btn('3')" class="btn fd_btngame" id="btn3" style="display: inline" src="img/btn/3.png"/></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div id="screen"></div>
                <script>
                    afficher("");
                    function search(){
                        var val = $("#search_bar").val();
                        afficher(val);
                    }
                    function btn(input){
                        var val = $("#search_bar").val();
                        var ret="";
                        if(val==""){
                            ret=input;
                        }else{
                            ret+=val;
                            var last = val[val.length -1];
                            if(isNaN(input)){
                                if(isNaN(last)){
                                    ret+="/";
                                }else{
                                    ret+=", ";
                                }
                            }else{
                                ret+="+";
                            }
                            ret+=input;
                        }
                        $("#search_bar").val(ret);
                        search();
                    }
                    function afficher(search){
                        var ret = "";
                        ret+="<div class='framedata_table'><table class='table'><tbody>";
                        var keyl = keys.length-1;
                        for(var x=0;x<frame.length;x++){
                            if(frame[x][properties].includes(search)){
                                ret+="<tr class='framedata_command'><td rowspan='"+keyl+"'>"+frame[x]['Command']+"</td>";
                                ret+="<td class='framedata_properties'>"+keys[1]+" : "+frame[x][keys[1]]+"</td></tr>";
                                for(var y=2;y<keys.length;y++){
                                    ret+="<tr><td class='framedata_properties'>"+keys[y]+" : "+frame[x][keys[y]]+"</td></tr>";
                                }
                            }
                        }
                        ret+="</tbody></table></div>";
                        $('#screen').html(ret);
                    }
                    function deleteSearch(){
                        $("#search_bar").val("");
                        afficher("");
                    }
                    function selectProperties(value){
                        this.properties = value;
                        $("#search_bar").attr("placeholder", value);
                    }
                </script>
            </div>
        </div>
        <div id="Spotlight" style="display: none">
            <script>
                var ret = "";
                ret+="<div class='framedata_table'>";
                for(var x=0;x<spotlight.length;x++){
                    var player = spotlight[x];
                    ret+="<table class='table framedata_spotlight'><tbody><tr class='framedata_command'><td >";
                    if(player.Sponsor!=""){
                        ret+=player.Sponsor+" | ";
                    } 
                    ret+=player.Player+"</td></tr>";
                    ret+="<tr class='framedata_command'><td >From "+player.Country+"</td></tr>";
                    ret+="<tr class='framedata_command'><td >Twitter : @"+player.Link+"</td></tr>";
                    ret+="<tr class='framedata_command'><td >"+player.Desc+"</td></tr></tbody></table>";
                }
                ret+="</div>";
                document.write(ret);
            </script>
        </div>
        <div id="Keymoves" style="display: none" class="container">
            <script>
                var ret = "";
                var punish_frames_min = 10;
                var punish_frames_max = 16;
                ret+="<h3 class='white_title'>Side to step : "+keymove["SideStep"]+"</h3>";
                ret+="<h3 class='white_title'>Punish</h3><div class='panel-group' id='accordion'>";
                for(var x=punish_frames_min;x<=punish_frames_max;x++){
                    ret+="<div class='panel panel-default' onclick='toggleDisplay(\"collapse"+x+"\")'><div class='panel-heading'><h4 class='panel-title'>"+x+" Frames</h4></div></div><div id='collapse"+x+"' class='panel-collapse collapse in white_title' style='display:none'><table class='table framedata_spotlight'><tbody>";
                    for(var y=0;y<frame.length;y++){
                        if(frame[y]['Start up frame'].includes(x)){
                            ret+="<tr class='framedata_command'><td>"+frame[y]['Command']+"</td></tr>";
                        }
                    }
                    ret+="</tbody></table></div>";
                }
                ret+="</div>";
                ret+="<div class='framedata_table'><h3>Combos</h3><table class='table framedata_keymove'><tbody>";
                for(var x=0;x<keymove["Combos"].length;x++){
                    var combo = keymove["Combos"][x];
                    ret+="<tr class='framedata_command'><td>"+combo+"</td></tr>";
                }
                ret+="</tbody></table></div>";
                document.write(ret);
            </script>
        </div>    
        <script>
            var onglet = ['FrameData','Spotlight', 'Keymoves'];
            var onglet_actuel = 0;
            $("#onglet_name").html(onglet[onglet_actuel]);
            function goToMenu(direction){
                toggleDisplay(onglet[onglet_actuel]);
                if(direction=='left'){
                    onglet_actuel--;
                    if(onglet_actuel<0){
                        onglet_actuel=onglet.length-1;
                    }
                }else if(direction=='right'){
                    onglet_actuel++;
                    if(onglet_actuel>onglet.length-1){
                        onglet_actuel=0;
                    }
                }
                toggleDisplay(onglet[onglet_actuel]);
                $("#onglet_name").html(onglet[onglet_actuel]);
            }
            $('.menubody').css("background-image", "url(img/background/game/default.jpg)");
            bottomNav();
        </script>
    </body>
</html>